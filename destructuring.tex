\input{prelude}

\title{Destructuring}
\date{13.~October~2013}

\begin{document}

\frame{\titlepage}

\centerframe{
  Apart from simple types, there are collections, which contain other things.
}

\centerframe{
  But sometimes we want simple data out of a collection type.
}

\centerframe{
  Actually, quite often.
}

\begin{frame}[fragile]
  \begin{minted}[gobble=4]{clojure}
    (def my-collection [1 2 [3 4] 5])
    (first my-collection)
    ;=> 1
    (nth my-collection 2)
    ;=> [3 4]
  \end{minted}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    But if we want multiple elements this gets ugly fast
  \end{center}
  \begin{minted}[gobble=4]{clojure}
    (let [a (nth my-collection 0)
          b (nth my-collection 1)
          c (nth my-collection 2)
          d (nth my-collection 3)]
      (println a c))
  \end{minted}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    How many of you know Python?
  \end{center}
  \pause
  \begin{minted}[gobble=4]{python}
    a, b, c, d = my_collection
  \end{minted}
\end{frame}

\centerframe{
  We want this too!
}

\begin{frame}[fragile]
  \begin{center}
    Hey, we can do this too!
  \end{center}
  \begin{minted}[gobble=4]{clojure}
    (let [[a b c d] my-collection]
      (println a c))
  \end{minted}
\end{frame}


\begin{frame}[fragile]
  \begin{center}
    What about this?
  \end{center}
  \begin{minted}[gobble=4]{python}
    a, b, *more = my_collection
  \end{minted}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    Can do!
  \end{center}
  \begin{minted}[gobble=4]{clojure}
    (let [[a b &more] my-collection]
      (println a more))
  \end{minted}
\end{frame}

\begin{frame}[fragile]
  \begin{center}
    But wait, it's not only vectors
  \end{center}
  \begin{minted}[gobble=4]{clojure}
    (def my-map {:lang "Clojure"
                 :platform "JVM"
                 :version "1.5.1"})

    (let [{language :lang} my-map]
      (println language))
  \end{minted}
\end{frame}

\begin{frame}
  \begin{center}
    So there is some kind of "unpacking language"?

    \pause
    YEP! This is called destructuring.
  \end{center}
\end{frame}

\begin{frame}
  What else?

  \begin{itemize}
    \item You can use this language in binding forms
    \item So, not only \texttt{let} but also \texttt{fn}/\texttt{defn}
    \item It works recursively
    \item More hands-on stuff in the workshop tasks
  \end{itemize}
\end{frame}

\end{document}
